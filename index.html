<!DOCTYPE HTML>
<html>
<body>

	<script>
 	
		let user_sum = 0;
		let computer_sum = 0;
		let valueOfCardUser = 0;
		let numberOfCardsUser = 0;
		let numberOfCardsComputer = 0;
		let cards = [6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,2,2,2,2,3,3,3,3,4,4,4,4,11,11,11,11];   //Номинал карт в колоде из 36 карт
		let nextCard = 0;


		function shuffle(massive) {					//Случайным образом тусую карты в колоде (массиве)
  			for (let i = massive.length - 1; i > 0; i--) {
    			let j = Math.floor(Math.random() * (i + 1)); // Случайный индекс от 0 до i
    			let blackHole = 0;
    			blackHole = massive[i];
    			massive[i] = massive[j]; // Меняю элементы местами
    			massive[j] = blackHole;
    		}
		}
		
		alert("Добро пожаловать в игру '21'!");
		alert("Игроку предлагается карта, которой присвоено определенное количество очков (от 2 до 11). Если игрок хочет, он может попросить дополнительные карты, но их общее число на руках не должно превышать 5. В случае выпадения туза, игрок имеет возможность выбрать присваиваемый номинал: 1 или 11. Если игрок набирает 21 очко, то автоматически выигрывает, если более 21- то проигрывает. Как только игрок перестает тянуть карты, компьютер показывает свои. Если компьютер набрал 21 очко, то он выигрывает, если более 21- то проигрывает. Если у игрока и компьютера меньше 21, то их очки сравниваются: у кого больше, тот и победил. Если количество очков одинаковое, то побеждает компьютер.");

		shuffle(cards);
		//console.log(cards);	// Тут можно подсмотреть порядок карт в перетусованной колоде 
		
		do{
			valueOfCardUser = cards[nextCard];
			nextCard += 1;
			alert("Номинал вашей карты " + valueOfCardUser);
			if(valueOfCardUser === 11){
				let fraseHowToCount = confirm("Если хотите считать туз (11) за 1 очко, то нажмите 'ок', если за 11 очков, то нажмите 'отмена'");
        		if(fraseHowToCount === true){
        			valueOfCardUser = 1;
        		}
        		else if(fraseHowToCount === false){
        			valueOfCardUser = 11;
        		}
			}
			user_sum += valueOfCardUser;
			alert("Сумма ваших карт равна " + user_sum);
			if(user_sum === 21){
				alert("Поздравляем, вы победили, набрав 21 очко!");
				break;
			}
			if(user_sum > 21){
				alert("Вы проиграли.");
				break;
			}
			numberOfCardsUser += 1;
			if(numberOfCardsUser === 5){
				alert("У вас уже 5 карт, больше набирать нельзя");
				break;
			}
		}
		while(confirm("Хотите набрать еще одну карту?"));
		
		if(user_sum < 21){
			while(computer_sum < 17){
				if(cards[nextCard] === 11){
					cards[nextCard] = 1;
				}
				computer_sum += cards[nextCard];
				//console.log(cards[nextCard]);		//Тут можно подсмотреть порядок карт, которые вытаскивал компьютер 
				nextCard += 1;			
				numberOfCardsComputer += 1;
				if(numberOfCardsComputer === 5){
					alert("Компьютер уже набрал 5 карт");
					break;
				}	
			}

			alert("Компьютер набрал " + computer_sum);
			if(computer_sum === 21){
				alert("Победил компьютер");
			}
			else if(computer_sum > 21){
				alert("Вы победили, т.к. компьютер набрал больше 21 очка");
			}
			else if (computer_sum < 21){
				if(user_sum > computer_sum){
					alert("Поздравляем, вы победили, набрав большее количество очков!");
				}
				else if(user_sum === computer_sum){
					alert("Победил компьютер, т.к. у вас равное количество очков");
				}
				else if(user_sum < computer_sum){
					alert("Победил компьютер, т.к. у него больше количество очков");
				}
			}
		}



	</script>
		
</body>
</html>
